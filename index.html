<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    <title>GoldenMM - Premium Slot Game</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'gold': '#FFD700',
              'dark-gold': '#B8860B',
              'game-bg': '#0F0F23',
              'card-bg': '#1A1A2E',
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'bounce-slow': 'bounce 2s infinite',
              'spin-slow': 'spin 3s linear infinite',
            }
          }
        }
      }
    </script>
    <style>
      .gradient-bg {
        background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 50%, #16213E 100%);
      }
      .gold-gradient {
        background: linear-gradient(135deg, #FFD700 0%, #B8860B 100%);
      }
      .progress-bar {
        background: linear-gradient(90deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
      }
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      /* Mobile-specific loading screen adjustments */
      @media (max-width: 768px) {
        #unity-loading-bar {
          padding: 20px;
          min-height: 100vh;
          display: flex !important;
          flex-direction: column;
          justify-content: center;
          align-items: center;
        }
        
        #unity-loading-bar .text-center {
          margin-bottom: 2rem;
        }
        
        #unity-loading-bar img {
          width: 80px !important;
          height: 80px !important;
        }
        
        #unity-loading-bar h2 {
          font-size: 1.5rem !important;
          margin-bottom: 0.5rem;
        }
        
        #unity-loading-bar p {
          font-size: 0.875rem !important;
        }
        
        #unity-loading-bar .w-72 {
          width: 280px !important;
          max-width: 90vw;
        }
      }
    </style>
  </head>
  <body class="gradient-bg min-h-screen overflow-hidden">
    <!-- Orientation Message -->
    <div id="rotate-message" class="fixed inset-0 bg-black bg-opacity-95 text-white text-2xl md:text-4xl font-bold flex flex-col items-center justify-center z-50 hidden">
      <div class="animate-spin-slow text-6xl mb-4">ðŸ“±</div>
      <p class="text-center px-4">Please rotate your device to landscape mode for the best gaming experience</p>
    </div>

    <!-- Top Navigation Bar -->
    <nav class="absolute top-0 left-0 right-0 z-40 glass-effect">
      <div class="flex items-center justify-between px-4 py-3">
        <div class="flex items-center space-x-3">
          <img src="TemplateData/shan.jpg" alt="GoldenMM Logo" class="w-10 h-10 rounded-full border-2 border-gold">
          <h1 class="text-white font-bold text-lg md:text-xl">GoldenMM</h1>
        </div>
        <div class="flex items-center space-x-4">
          <!-- Music Controls -->
          <button id="music-toggle" class="text-white hover:text-gold transition-colors duration-300 p-2 rounded-full hover:bg-white hover:bg-opacity-10">
            <svg id="music-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.794L4.617 14H2a1 1 0 01-1-1V7a1 1 0 011-1h2.617l3.766-2.794a1 1 0 011-.13zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path>
            </svg>
          </button>
          <!-- Fullscreen Button -->
          <button id="fullscreen-btn" class="text-white hover:text-gold transition-colors duration-300 p-2 rounded-full hover:bg-white hover:bg-opacity-10">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15.586 13H14a1 1 0 01-1-1z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>

    <!-- Main Game Container -->
    <div id="unity-container" class="absolute inset-0 flex items-center justify-center">
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1" class="rounded-lg shadow-2xl border-2 border-gold"></canvas>
      
      <!-- Modern Loading Screen -->
      <div id="unity-loading-bar" class="absolute inset-0 flex flex-col items-center justify-center bg-game-bg bg-opacity-95 rounded-lg hidden">
        <div class="text-center mb-6 md:mb-8 px-4">
          <img src="TemplateData/shan.jpg" alt="GoldenMM" class="w-20 h-20 md:w-32 md:h-32 rounded-full border-4 border-gold mx-auto mb-3 md:mb-4 animate-pulse-slow">
          <h2 class="text-white text-xl md:text-3xl font-bold mb-2">GoldenMM</h2>
          <p class="text-gold text-sm md:text-lg">Premium Slot Game Experience</p>
        </div>
        
        <!-- Mobile-optimized progress bar -->
        <div class="w-72 md:w-96 bg-gray-700 rounded-full h-3 md:h-4 mb-4 overflow-hidden mx-4">
          <div id="unity-progress-bar-full" class="progress-bar h-full rounded-full transition-all duration-300 ease-out"></div>
        </div>
        
        <div class="text-center px-4">
          <p id="loading-text" class="text-white text-xs md:text-sm mb-2">Loading game assets...</p>
          <div class="flex space-x-1 justify-center">
            <div class="w-1.5 h-1.5 md:w-2 md:h-2 bg-gold rounded-full animate-bounce"></div>
            <div class="w-1.5 h-1.5 md:w-2 md:h-2 bg-gold rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
            <div class="w-1.5 h-1.5 md:w-2 md:h-2 bg-gold rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
          </div>
        </div>
      </div>
      
      <!-- Warning Messages -->
      <div id="unity-warning" class="absolute top-20 left-1/2 transform -translate-x-1/2 z-30 hidden"></div>
    </div>

    <!-- Footer -->
    <footer class="absolute bottom-0 left-0 right-0 z-40 glass-effect">
      <div class="flex items-center justify-between px-4 py-2">
        <div class="flex items-center space-x-2">
          <img src="TemplateData/webgl-logo.png" alt="WebGL" class="h-6 opacity-80">
        </div>
        <div class="text-white text-sm">
          <span class="text-gold font-semibold">GoldenMM</span> v1.0.3
        </div>
      </div>
    </footer>

    <!-- Background Music -->
    <audio id="background-music" loop>
      <source src="TemplateData/sounds/carti-trap-203848.mp3" type="audio/mpeg">
      <source src="TemplateData/sounds/trap-beat-266443.mp3" type="audio/mpeg">
    </audio>
    
    <script>
      // Modern UI and Music Management
      let isMusicPlaying = false;
      let currentTrack = 0;
      const musicTracks = [
        'TemplateData/sounds/carti-trap-203848.mp3',
        'TemplateData/sounds/trap-beat-266443.mp3'
      ];

      // Initialize UI elements
      const musicToggle = document.getElementById('music-toggle');
      const musicIcon = document.getElementById('music-icon');
      const backgroundMusic = document.getElementById('background-music');
      const fullscreenBtn = document.getElementById('fullscreen-btn');
      const loadingText = document.getElementById('loading-text');

      // Music control functionality
      function toggleMusic() {
        if (isMusicPlaying) {
          backgroundMusic.pause();
          musicIcon.innerHTML = `
            <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.794L4.617 14H2a1 1 0 01-1-1V7a1 1 0 011-1h2.617l3.766-2.794a1 1 0 011-.13zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path>
          `;
        } else {
          backgroundMusic.play().catch(e => console.log('Audio play failed:', e));
          musicIcon.innerHTML = `
            <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.794L4.617 14H2a1 1 0 01-1-1V7a1 1 0 011-1h2.617l3.766-2.794a1 1 0 011-.13zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path>
            <path d="M10 8v4l3 2m-6 0l3-2V8"></path>
          `;
        }
        isMusicPlaying = !isMusicPlaying;
      }

      // Music event listeners
      musicToggle.addEventListener('click', toggleMusic);
      backgroundMusic.addEventListener('play', () => isMusicPlaying = true);
      backgroundMusic.addEventListener('pause', () => isMusicPlaying = false);

      // Enhanced orientation check with modern UI
      function checkOrientation() {
        const message = document.getElementById("rotate-message");
        const isPortrait = window.innerHeight > window.innerWidth;
        
        if (isPortrait) {
          message.classList.remove('hidden');
          message.classList.add('flex');
        } else {
          message.classList.add('hidden');
          message.classList.remove('flex');
        }
      }

      // Modern loading text updates
      const loadingMessages = [
        "Loading game assets...",
        "Preparing graphics...",
        "Initializing game engine...",
        "Almost ready...",
        "Starting your adventure..."
      ];

      function updateLoadingText(progress) {
        const messageIndex = Math.floor(progress * loadingMessages.length);
        if (loadingText && messageIndex < loadingMessages.length) {
          loadingText.textContent = loadingMessages[messageIndex];
        }
      }

      // Event listeners
      window.addEventListener("resize", checkOrientation);
      window.addEventListener("orientationchange", checkOrientation);
      checkOrientation();

      // Unity game setup
      const container = document.querySelector("#unity-container");
      const canvas = document.querySelector("#unity-canvas");
      const loadingBar = document.querySelector("#unity-loading-bar");
      const progressBarFull = document.querySelector("#unity-progress-bar-full");
      const warningBanner = document.querySelector("#unity-warning");

      // Enhanced warning banner with modern styling
      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.classList.toggle('hidden', warningBanner.children.length === 0);
        }
        
        const div = document.createElement('div');
        div.innerHTML = msg;
        div.className = `px-6 py-3 rounded-lg shadow-lg mb-2 max-w-md mx-auto text-center font-medium ${
          type === 'error' 
            ? 'bg-red-500 text-white border border-red-400' 
            : 'bg-yellow-400 text-yellow-900 border border-yellow-300'
        }`;
        
        warningBanner.appendChild(div);
        
        if (type !== 'error') {
          setTimeout(() => {
            if (warningBanner.contains(div)) {
              warningBanner.removeChild(div);
              updateBannerVisibility();
            }
          }, 5000);
        }
        updateBannerVisibility();
      }

      // Unity configuration
      const buildUrl = "Build";
      const loaderUrl = buildUrl + "/SKMWebDelight.loader.js";
      const config = {
        dataUrl: buildUrl + "/SKMWebDelight.data",
        frameworkUrl: buildUrl + "/SKMWebDelight.framework.js",
        codeUrl: buildUrl + "/SKMWebDelight.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Delight",
        productName: "GoldenMM",
        productVersion: "1.0.3",
        showBanner: unityShowBanner,
      };

      // Mobile detection and responsive setup
      if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        container.classList.add("unity-mobile");
        canvas.classList.add("unity-mobile");
        canvas.style.width = "100%";
        canvas.style.height = "100%";
      } else {
        canvas.style.width = "960px";
        canvas.style.height = "600px";
      }

      // Show loading screen
      loadingBar.classList.remove('hidden');

      // Load Unity game
      const script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => {
        createUnityInstance(canvas, config, (progress) => {
          progressBarFull.style.width = 100 * progress + "%";
          updateLoadingText(progress);
        }).then((unityInstance) => {
          loadingBar.classList.add('hidden');
          
          // Fullscreen functionality
          fullscreenBtn.onclick = () => {
            unityInstance.SetFullscreen(1);
          };
          
          // Auto-start background music (with user interaction)
          document.addEventListener('click', () => {
            if (!isMusicPlaying) {
              backgroundMusic.play().catch(e => console.log('Auto-play prevented:', e));
            }
          }, { once: true });
          
        }).catch((message) => {
          console.error('Unity loading failed:', message);
          loadingText.textContent = "Loading failed. Please refresh the page.";
        });
      };
      
      document.body.appendChild(script);
    </script>
  </body>
</html>
